window.eweeye||(window.eweeye={}),window.eweeye.Constants||(window.eweeye.Constants={}),window.eweeye.Constants.Library="eweeye",window.eweeye.Constants.NodeItem="node",window.eweeye.Constants.NodeButton="main",window.eweeye.Constants.NodeIcon="icon",window.eweeye.Constants.NodeLabel="label",window.eweeye.Constants.NodeSelf="self",window.eweeye.Constants.NodeChildren="children",window.eweeye.Constants.NodeOptions="options",window.eweeye.Constants.Hidden="hidden",function(){var a=window;a.eweeye||(a.eweeye={});function e(){}e.prototype.GetContainerElement=function(e){var t=e.Tree;e.Parent&&(t=e.Parent);var n=document.getElementById(t);return n?(n instanceof HTMLUListElement||n instanceof HTMLLIElement&&(n=Array.prototype.filter.call(n.children,function(e){return e instanceof HTMLUListElement}))&&0<n.length&&(n=n[0]),n||void console.error("Unable to add to DOM")):(console.error("Unable to add to DOM"),null)},e.prototype.GetElement=function(e){var t=document.getElementById(k.Id);if(t)return t;console.error("Unable to find in DOM")},a.eweeye.Node||(a.eweeye.Node=new e);var t=a.eweeye.Node,d=a.eweeye.Constants;t.Type={};function n(e,t){function n(){}(n.prototype=t.prototype).constructor=n,e.prototype=new n,e.prototype.constructor=e,t.prototype.constructor=t}t.Type.Base=function(e,t,n){this.Tree=e,this.Parent=t,this.Id=n},t.Type.Base.prototype.Tree="",t.Type.Base.prototype.Parent="",t.Type.Base.prototype.Id="",t.Type.Base.prototype.Reactions={},t.Type.Base.prototype.Rendered=!1,t.Type.Base.prototype.Render=function(){var e,t,n=window.eweeye.Node;this.Rendered?(e=n.GetElement(this))&&this.UpdateElement(e):(t=n.GetContainerElement(this))&&(e=this.CreateElement(),t.appendChild(e))},t.Type.Base.prototype.RenderContent=function(){var e=document.createElement("span");return e.appendChild(document.createTextNode("")),e},t.Type.Base.prototype.RenderIcon=function(){var e=document.createElement("span"),t="far";if(this.hasOwnProperty("Theme"))switch(this.Theme.toLowerCase()){case"solid":t="fas";break;case"light":t="fal";break;case"duotone":t="fad"}return e.classList.add(t),e.classList.add("fa-question"),e},t.Type.Base.prototype.CreateElement=function(){var e=document.createElement("li");e.id=this.Id,e.classList.add(d.NodeItem);var t=document.createElement("div");t.classList.add(d.NodeSelf);var n=document.createElement("button");n.classList.add(d.NodeButton),t.appendChild(n);var o=document.createElement("div");o.classList.add(d.NodeIcon),o.appendChild(this.RenderIcon()),o.classList.add(d.NodeIcon);var r=document.createElement("div");r.classList.add(d.NodeLabel),r.appendChild(this.RenderContent()),o&&n.appendChild(o),r&&n.appendChild(r);var s=document.createElement("div");return s.classList.add(d.NodeOptions),e.appendChild(t),e.appendChild(s),this.Rendered=!0,e},t.Type.Base.prototype.UpdateElement=function(e){var t,n,o=e.querySelector("button."+d.NodeButton);o&&((t=o.querySelector("div."+d.NodeIcon))&&(t.innerHTML="",t.appendChild(this.RenderIcon())),(n=o.querySelector("div."+d.NodeLabel))&&(n.innerHTML="",n.appendChild(this.RenderContent())))},t.Type.Base.prototype.Trigger=function(e,t,n){"click"===e?(console.log("Node ["+this.Id+"] clicked."),this.TriggerParent("poke","Message from son!"),this.TriggerSiblings("poke","Message from bro!"),this.TriggerChildren&&this.TriggerChildren("poke","Message from dad!")):"poke"===e&&console.log("Node ["+this.Id+"] poked by node ["+t.Id+"] with message ["+JSON.stringify(n)+"]"),this.Reactions.hasOwnProperty(e)&&this.Reactions[e].call(this,t)},t.Type.Base.prototype.TriggerParent=function(e,t){this.Parent?window.eweeye.TreeView.Nodes.hasOwnProperty(this.Parent)&&window.eweeye.TreeView.Nodes[this.Parent].Trigger(e,this,t):console.log("Node ["+this.Id+"] has no parent.")},t.Type.Base.prototype.TriggerSiblings=function(e,t){if(this.Parent){if(window.eweeye.TreeView.Nodes.hasOwnProperty(this.Parent)){var n=window.eweeye.TreeView.Nodes[this.Parent];if(n instanceof window.eweeye.Node.Type.Expandable)for(var o in n.Children)window.eweeye.TreeView.Nodes.hasOwnProperty(o)&&o!==this.Id&&window.eweeye.TreeView.Nodes[o].Trigger(e,this,t)}}else for(var r in window.eweeye.TreeView.Nodes)window.eweeye.TreeView.Nodes.hasOwnProperty(r)&&r!==this.Id&&(window.eweeye.TreeView.Nodes[r].Parent||window.eweeye.TreeView.Nodes[r].Trigger(e,this,t))},t.Type.Primitive=function(e){if(this.Tree=e.Tree,this.Parent=e.Parent,this.Id=e.Id,this.Value=e.Value,e.hasOwnProperty("Icon"))this.Icon=e.Icon;else if(null===this.Value&&(this.Icon="ban"),this.Value||!1===this.Value||0===this.Value)switch(typeof this.Value){case"undefined":this.Icon="ban";break;case"boolean":this.Value?this.Icon="check":this.Icon="times";break;case"number":this.Icon="hashtag";break;case"string":this.Icon="text";break;case"object":this.Icon="cube";break;case"function":this.Icon="rocket"}},n(t.Type.Primitive,t.Type.Base),t.Type.Primitive.prototype.Value=null,t.Type.Primitive.prototype.Icon="circle",t.Type.Primitive.prototype.RenderContent=function(){var e=document.createElement("span"),t="",n=null;if(null===this.Value&&(t="null"),this.Value||!1===this.Value||0===this.Value)switch(typeof this.Value){case"undefined":t="undefined";break;case"boolean":t=this.Value?"true":"false";break;case"number":t=this.Value.toString();break;case"string":t=this.Value;break;case"object":try{this.Value instanceof HTMLElement&&(n=this.Value)}catch(e){t=JSON.stringify(this.Value)}break;case"function":t=JSON.stringify(this.Value)}return n?e.appendChild(n):e.appendChild(document.createTextNode(t)),e},t.Type.Primitive.prototype.RenderIcon=function(){var e=document.createElement("span"),t="far";if(this.hasOwnProperty("Theme"))switch(this.Theme.toLowerCase()){case"solid":t="fas";break;case"light":t="fal";break;case"duotone":t="fad"}return e.classList.add(t),null===this.Value&&e.classList.add("fa-ban"),e.classList.add("fa-"+this.Icon),e},t.Type.Toggle=function(e){this.Tree=e.Tree,this.Parent=e.Parent,this.Id=e.Id,this.Value=e.Value,e.hasOwnProperty("IconTrue")&&(this.IconTrue=e.IconTrue),e.hasOwnProperty("IconFalse")&&(this.IconFalse=e.IconFalse)},n(t.Type.Toggle,t.Type.Base),t.Type.Toggle.prototype.Value=!1,t.Type.Toggle.prototype.IconTrue="dot-circle",t.Type.Toggle.prototype.IconFalse="circle",t.Type.Toggle.prototype.RenderContent=function(){var e=document.createElement("span"),t="false";return this.Value&&(t="true"),e.appendChild(document.createTextNode(t)),e},t.Type.Toggle.prototype.RenderIcon=function(){var e=document.createElement("span"),t="far";if(this.hasOwnProperty("Theme"))switch(this.Theme.toLowerCase()){case"solid":t="fas";break;case"light":t="fal";break;case"duotone":t="fad"}return e.classList.add(t),this.Value?e.classList.add("fa-"+this.IconTrue):e.classList.add("fa-"+this.IconFalse),e},t.Type.Toggle.prototype.Reactions={click:function(e){this.Value=!this.Value,this.Render()}},t.Type.Expandable=function(e){this.Id=e.Id,this.Tree=e.Tree,this.Value=e.Value,this.Parent=e.hasOwnProperty("Parent")?e.Parent:null,e.hasOwnProperty("IconOpen")&&(this.IconOpen=e.IconOpen),e.hasOwnProperty("IconClosed")&&(this.IconClosed=e.IconClosed),this.Children={}},n(t.Type.Expandable,t.Type.Primitive),t.Type.Expandable.prototype.Children={},t.Type.Expandable.prototype.Expanded=!1,t.Type.Expandable.prototype.IconOpen="minus-square",t.Type.Expandable.prototype.IconClosed="plus-square",t.Type.Expandable.prototype.Reactions={click:function(e){this.Expanded=!this.Expanded,this.Render()}},t.Type.Expandable.prototype.RenderIcon=function(){var e=document.createElement("span"),t="far";if(this.hasOwnProperty("Theme"))switch(this.Theme.toLowerCase()){case"solid":t="fas";break;case"light":t="fal";break;case"duotone":t="fad"}return e.classList.add(t),this.Expanded?this.IconOpen&&"string"==typeof this.IconOpen&&e.classList.add("fa-"+this.IconOpen):this.IconClosed&&"string"==typeof this.IconClosed&&e.classList.add("fa-"+this.IconClosed),e},t.Type.Expandable.prototype.CreateElement=function(){var e=document.createElement("li");e.id=this.Id,e.classList.add(d.NodeItem);var t=document.createElement("div");t.classList.add(d.NodeSelf);var n=document.createElement("button");n.classList.add(d.NodeButton),t.appendChild(n);var o=document.createElement("div");o.classList.add(d.NodeIcon),o.appendChild(this.RenderIcon()),o.classList.add(d.NodeIcon);var r=document.createElement("div");r.classList.add(d.NodeLabel),r.appendChild(this.RenderContent()),o&&n.appendChild(o),r&&n.appendChild(r);var s=document.createElement("div");s.classList.add(d.NodeOptions),e.appendChild(t),e.appendChild(s);var i=document.createElement("ul");return i.classList.add(d.NodeChildren),e.appendChild(i),this.Rendered=!0,e},t.Type.Expandable.prototype.UpdateElement=function(e){var t,n,o=e.querySelector("button."+d.NodeButton);o&&((t=o.querySelector("div."+d.NodeIcon))&&(t.innerHTML="",t.appendChild(this.RenderIcon())),(n=o.querySelector("div."+d.NodeLabel))&&(n.innerHTML="",n.appendChild(this.RenderContent())));var r,s=e.querySelector("ul."+d.NodeChildren);if(s)if(this.Expanded){for(var i in this.Children){this.Children.hasOwnProperty(i)&&((r=a.eweeye.TreeView.Nodes.Get(i)).Rendered||r.Render())}s.classList.remove(d.Hidden)}else s.classList.add(d.Hidden)},t.Type.Expandable.prototype.TriggerChildren=function(e,t){for(var n in this.Children)window.eweeye.TreeView.Nodes.hasOwnProperty(n)&&window.eweeye.TreeView.Nodes[n].Trigger(e,this,t)},t.Create=function(e){if(e.hasOwnProperty("Type"))switch(e.Type.toLowerCase()){case"expandable":return new eweeye.Node.Type.Expandable(e);case"toggle":return new eweeye.Node.Type.Toggle(e);default:return new eweeye.Node.Type.Primitive(e)}}}(),function(){var n=window;n.eweeye||(n.eweeye={}),n.eweeye.TreeView||(n.eweeye.TreeView={},n.eweeye.TreeView.Type={},n.eweeye.TreeView.Type.Nodes=function(){},n.eweeye.TreeView.Type.Nodes.prototype.Has=function(e){return"string"==typeof e?this.hasOwnProperty(e):!!e.hasOwnProperty("Id")&&this.hasOwnPropery(e.Id)},n.eweeye.TreeView.Type.Nodes.prototype.Get=function(e){if(this.Has(e)){if("string"==typeof e)return this[e];if(e.hasOwnProperty("Id"))return this[e.Id]}return null},n.eweeye.TreeView.Type.Nodes.prototype.Add=function(e){var t=window.eweeye.TreeView;if(e)if(t.Trees.Has(e.Tree))if(t.Trees[e.Tree].Has(e.Id))console.error("Node already exists in tree");else if(t.Nodes.Has(e.Id))console.error("Node already exists in alternate tree");else if(document.getElementById(e.Id))console.error("Id already exists in DOM");else{if(t.Nodes[e.Id]=e,t.Trees[e.Tree].Add(e.Id),0<t.Orphans.length&&e instanceof eweeye.Node.Type.Expandable)for(var n,o=0,r=t.Orphans.length;o<r;o++){t.Nodes[t.Orphans[o]].Parent===e.Id&&(n=t.Nodes[t.Orphans[o]].Id,e.Children[n]=n,t.Orphans.splice(o,1),r--,o--)}var s=!0;if(e.Parent){if(!t.Nodes.Has(e.Parent))return t.Orphans.push(e.Id),void(s=!1);var i=t.Nodes[e.Parent];if(!(i instanceof eweeye.Node.Type.Expandable))return void(s=!1);i.Children[e.Id]=e.Id;var a=e.Parent,d=t.Nodes[a];!1!==d.Rendered&&!1!==d.Expanded||(s=!1)}s&&e.Render()}else console.error("Unknown tree");else console.error("Empty node")},n.eweeye.TreeView.Type.Trees=function(){},n.eweeye.TreeView.Type.Trees.prototype.Has=function(e){return!("string"!=typeof e||!window.eweeye.TreeView.Trees.hasOwnProperty(e))},n.eweeye.TreeView.Type.Trees.prototype.Add=function(e){var t=window.eweeye.TreeView;if(e){if("string"==typeof e){if(t.Trees.Has(e))return void console.error("Tree already exists");t.Trees[e]=new n.eweeye.Tree.Type.Base(e)}else if(e instanceof n.eweeye.Tree.Type.Base){if(t.Trees.Has(e.Id))return void console.error("Tree already exists");t.Trees[e.Id]=e}}else console.error("Empty tree")},n.eweeye.TreeView={Trees:new n.eweeye.TreeView.Type.Trees,Nodes:new n.eweeye.TreeView.Type.Nodes,Orphans:[]}),n.eweeye.TreeView._renderQueue=[]}(),document.addEventListener("click",function(e){function t(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null}var n,o,r,s=t(e.target,"button");s&&(!s.matches("."+window.eweeye.Constants.NodeButton)||(n=t(s,"li")).matches("."+window.eweeye.Constants.NodeItem)&&(o=n.id,(r=eweeye.TreeView.Nodes[o].Trigger("click","user"))&&eweeye.TreeView.Render(r)))});